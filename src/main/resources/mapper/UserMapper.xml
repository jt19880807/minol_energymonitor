<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.minol.energymonitor.repository.UserMapper" >
    <resultMap id="UserResult" type="com.minol.energymonitor.domain.entity.SysUser">
        <id column="id" property="id"/>
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <result column="role_id" property="role_id"/>
        <result column="status" property="status"/>
        <result column="createtime" property="createtime"/>
        <result column="last_login" property="last_login"/>
        <result column="rolename" property="rolename"/>
        <!--<association property="sysRole" column="role_id" select="com.minol.energymonitor.repository.RoleMapper.selectRoleById"/>-->
    </resultMap>

    <select id="selectAllUsers" resultMap="UserResult">
        SELECT u.id,u.username,u.password,u.role_id,u.status,u.last_login,r.name as rolename FROM sys_user u
        left JOIN sys_role r on u.role_id=r.id
    </select>
    <!--<select id="selectRole" parameterType="int" resultType="com.minol.energymonitor.domain.entity.SysRole">-->
        <!--SELECT * from sys_role where id=#{id}-->
    <!--</select>-->
    <select id="selectUserByName"  resultType="com.minol.energymonitor.domain.entity.SysUser">
         SELECT * FROM sys_user WHERE username = #{name}
    </select>

</mapper>